<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - EcoSwap Marketplace</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@600&display=swap" rel="stylesheet">
    <style>
        /* Simple styling for readability */
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <h1>Welcome to the Admin Dashboard</h1>
    <p>You have successfully logged in as an Admin.</p>

    <div>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>

    <h2>üìä Product Listings ({{ products|length }})</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Seller</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.id }}</td>
                <td>{{ product.title }}</td>
                <td>{{ product.seller.username }}</td>
                <td>${{ '%.2f' | format(product.price or 0) }}</td>
                <td>{% if product.sold %}**SOLD**{% else %}Available{% endif %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr>

    <h2>üë• Registered Users ({{ users|length }})</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Email</th>
                <th>Admin</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{% if user.is_admin %}‚úÖ Yes{% else %}‚ùå No{% endif %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr>

    <h2>üí¨ User Feedback ({{ feedback_list|length }})</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Submitted By</th>
                <th>Content</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
            {% for feedback in feedback_list %}
            <tr>
                <td>{{ feedback.id }}</td>
                <td>{{ feedback.user.username }}</td>
                <td>{{ feedback.content | truncate(50, True) }}</td>
                <td>{{ feedback.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>